\hypertarget{struct_p_t_vertex_processor}{}\section{P\+T\+Vertex\+Processor Struct Reference}
\label{struct_p_t_vertex_processor}\index{P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}}


\subsection{Detailed description}
A simple implementation of the \hyperlink{_p_t_lib_page_TPTVertexProcessor}{T\+P\+T\+Vertex\+Processor} policy interface required by all the \hyperlink{group___p_t_lib_core}{P\+T\+Lib\+Core} functions. This class is responsible of processing each vertex generated by the path tracer, including\+: \begin{DoxyParagraph}{}

\begin{DoxyItemize}
\item the computation of N\+EE weights
\item the computation of scattering weights
\item the accumulation of emissive surface hits
\item the accumulation of N\+EE samples 
\end{DoxyItemize}
\end{DoxyParagraph}


{\ttfamily \#include $<$pathtracer\+\_\+vertex\+\_\+processor.\+h$>$}

\subsection*{Public Methods}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename P\+T\+Context $>$ }\\F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE uint32 \hyperlink{struct_p_t_vertex_processor_aa234e9a79024286bf6a7e93dc7cf3d10}{preprocess\+\_\+vertex} (const P\+T\+Context \&context, const \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&renderer, const \hyperlink{union_pixel_info}{Pixel\+Info} pixel\+\_\+info, const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&ev, const float cone\+\_\+radius, const \hyperlink{structcugar_1_1_bbox}{cugar\+::\+Bbox3f} scene\+\_\+bbox, const uint32 prev\+\_\+vertex\+\_\+info, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} w, const float p\+\_\+prev)
\item 
{\footnotesize template$<$typename P\+T\+Context $>$ }\\F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void \hyperlink{struct_p_t_vertex_processor_acca5b26b69481a1fada796bac4588b9b}{compute\+\_\+nee\+\_\+weights} (const P\+T\+Context \&context, const \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&renderer, const \hyperlink{union_pixel_info}{Pixel\+Info} pixel\+\_\+info, const uint32 prev\+\_\+vertex\+\_\+info, const uint32 vertex\+\_\+info, const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&ev, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&f\+\_\+d, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&f\+\_\+g, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&w, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&f\+\_\+L, \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&out\+\_\+w\+\_\+d, \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&out\+\_\+w\+\_\+g, uint32 \&out\+\_\+vertex\+\_\+info)
\item 
{\footnotesize template$<$typename P\+T\+Context $>$ }\\F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void \hyperlink{struct_p_t_vertex_processor_a832bbbc566d333cd7a0789690f5f7c62}{compute\+\_\+scattering\+\_\+weights} (const P\+T\+Context \&context, const \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&renderer, const \hyperlink{union_pixel_info}{Pixel\+Info} pixel\+\_\+info, const uint32 prev\+\_\+vertex\+\_\+info, const uint32 vertex\+\_\+info, const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&ev, const uint32 out\+\_\+comp, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&g, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&w, \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&out\+\_\+w, uint32 \&out\+\_\+vertex\+\_\+info)
\begin{DoxyCompactList}\small\item\em \mbox{[}\hyperlink{struct_p_t_vertex_processor_acca5b26b69481a1fada796bac4588b9b}{P\+T\+Vertex\+Processor\+::compute\+\_\+nee\+\_\+weights}\mbox{]} \end{DoxyCompactList}\item 
{\footnotesize template$<$typename P\+T\+Context $>$ }\\F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void \hyperlink{struct_p_t_vertex_processor_abde6145491f81a3db09b8f5bc60f2541}{accumulate\+\_\+emissive} (const P\+T\+Context \&context, \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&renderer, const \hyperlink{union_pixel_info}{Pixel\+Info} pixel\+\_\+info, const uint32 prev\+\_\+vertex\+\_\+info, const uint32 vertex\+\_\+info, const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&ev, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&w)
\begin{DoxyCompactList}\small\item\em \mbox{[}\hyperlink{struct_p_t_vertex_processor_a832bbbc566d333cd7a0789690f5f7c62}{P\+T\+Vertex\+Processor\+::compute\+\_\+scattering\+\_\+weights}\mbox{]} \end{DoxyCompactList}\item 
{\footnotesize template$<$typename P\+T\+Context $>$ }\\F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void \hyperlink{struct_p_t_vertex_processor_a54a966b384fba210db9a87e0182d5a44}{accumulate\+\_\+nee} (const P\+T\+Context \&context, \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&renderer, const \hyperlink{union_pixel_info}{Pixel\+Info} pixel\+\_\+info, const uint32 vertex\+\_\+info, const bool shadow\+\_\+hit, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&w\+\_\+d, const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&w\+\_\+g)
\begin{DoxyCompactList}\small\item\em \mbox{[}\hyperlink{struct_p_t_vertex_processor_abde6145491f81a3db09b8f5bc60f2541}{P\+T\+Vertex\+Processor\+::accumulate\+\_\+emissive}\mbox{]} \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{struct_p_t_vertex_processor_abde6145491f81a3db09b8f5bc60f2541}\label{struct_p_t_vertex_processor_abde6145491f81a3db09b8f5bc60f2541}} 
\index{P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}!accumulate\+\_\+emissive@{accumulate\+\_\+emissive}}
\index{accumulate\+\_\+emissive@{accumulate\+\_\+emissive}!P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}}
\subsubsection{\texorpdfstring{accumulate\+\_\+emissive()}{accumulate\_emissive()}}
{\footnotesize\ttfamily template$<$typename P\+T\+Context $>$ \\
F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void P\+T\+Vertex\+Processor\+::accumulate\+\_\+emissive (\begin{DoxyParamCaption}\item[{const P\+T\+Context \&}]{context,  }\item[{\hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&}]{renderer,  }\item[{const \hyperlink{union_pixel_info}{Pixel\+Info}}]{pixel\+\_\+info,  }\item[{const uint32}]{prev\+\_\+vertex\+\_\+info,  }\item[{const uint32}]{vertex\+\_\+info,  }\item[{const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&}]{ev,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{w }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\mbox{[}\hyperlink{struct_p_t_vertex_processor_a832bbbc566d333cd7a0789690f5f7c62}{P\+T\+Vertex\+Processor\+::compute\+\_\+scattering\+\_\+weights}\mbox{]} 

\mbox{[}\hyperlink{struct_p_t_vertex_processor_abde6145491f81a3db09b8f5bc60f2541}{P\+T\+Vertex\+Processor\+::accumulate\+\_\+emissive}\mbox{]} accumulate an emissive surface hit


\begin{DoxyParams}{Parameters}
{\em context} & the current context \\
\hline
{\em renderer} & the current renderer \\
\hline
{\em pixel\+\_\+info} & packed pixel info \\
\hline
{\em vertex\+\_\+info} & packed vertex info \\
\hline
{\em ev} & the eye vertex \\
\hline
{\em w} & the emissive sample weight \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{struct_p_t_vertex_processor_a54a966b384fba210db9a87e0182d5a44}\label{struct_p_t_vertex_processor_a54a966b384fba210db9a87e0182d5a44}} 
\index{P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}!accumulate\+\_\+nee@{accumulate\+\_\+nee}}
\index{accumulate\+\_\+nee@{accumulate\+\_\+nee}!P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}}
\subsubsection{\texorpdfstring{accumulate\+\_\+nee()}{accumulate\_nee()}}
{\footnotesize\ttfamily template$<$typename P\+T\+Context $>$ \\
F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void P\+T\+Vertex\+Processor\+::accumulate\+\_\+nee (\begin{DoxyParamCaption}\item[{const P\+T\+Context \&}]{context,  }\item[{\hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&}]{renderer,  }\item[{const \hyperlink{union_pixel_info}{Pixel\+Info}}]{pixel\+\_\+info,  }\item[{const uint32}]{vertex\+\_\+info,  }\item[{const bool}]{shadow\+\_\+hit,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{w\+\_\+d,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{w\+\_\+g }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\mbox{[}\hyperlink{struct_p_t_vertex_processor_abde6145491f81a3db09b8f5bc60f2541}{P\+T\+Vertex\+Processor\+::accumulate\+\_\+emissive}\mbox{]} 

\mbox{[}\hyperlink{struct_p_t_vertex_processor_a54a966b384fba210db9a87e0182d5a44}{P\+T\+Vertex\+Processor\+::accumulate\+\_\+nee}\mbox{]} accumulate a N\+EE sample


\begin{DoxyParams}{Parameters}
{\em context} & the current context \\
\hline
{\em renderer} & the current renderer \\
\hline
{\em pixel\+\_\+info} & packed pixel info \\
\hline
{\em vertex\+\_\+info} & packed vertex info \\
\hline
{\em hit} & the hit information \\
\hline
{\em w\+\_\+d} & the diffuse nee weight \\
\hline
{\em w\+\_\+g} & the glossy nee weight \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{struct_p_t_vertex_processor_acca5b26b69481a1fada796bac4588b9b}\label{struct_p_t_vertex_processor_acca5b26b69481a1fada796bac4588b9b}} 
\index{P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}!compute\+\_\+nee\+\_\+weights@{compute\+\_\+nee\+\_\+weights}}
\index{compute\+\_\+nee\+\_\+weights@{compute\+\_\+nee\+\_\+weights}!P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}}
\subsubsection{\texorpdfstring{compute\+\_\+nee\+\_\+weights()}{compute\_nee\_weights()}}
{\footnotesize\ttfamily template$<$typename P\+T\+Context $>$ \\
F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void P\+T\+Vertex\+Processor\+::compute\+\_\+nee\+\_\+weights (\begin{DoxyParamCaption}\item[{const P\+T\+Context \&}]{context,  }\item[{const \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&}]{renderer,  }\item[{const \hyperlink{union_pixel_info}{Pixel\+Info}}]{pixel\+\_\+info,  }\item[{const uint32}]{prev\+\_\+vertex\+\_\+info,  }\item[{const uint32}]{vertex\+\_\+info,  }\item[{const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&}]{ev,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{f\+\_\+d,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{f\+\_\+g,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{w,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{f\+\_\+L,  }\item[{\hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{out\+\_\+w\+\_\+d,  }\item[{\hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{out\+\_\+w\+\_\+g,  }\item[{uint32 \&}]{out\+\_\+vertex\+\_\+info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{[}\hyperlink{struct_p_t_vertex_processor_acca5b26b69481a1fada796bac4588b9b}{P\+T\+Vertex\+Processor\+::compute\+\_\+nee\+\_\+weights}\mbox{]} compute nee weights given a vertex


\begin{DoxyParams}{Parameters}
{\em context} & the current context \\
\hline
{\em renderer} & the current renderer \\
\hline
{\em pixel\+\_\+info} & packed pixel info \\
\hline
{\em vertex\+\_\+info} & packed vertex info \\
\hline
{\em ev} & the eye vertex \\
\hline
{\em f\+\_\+d} & the diffuse brdf \\
\hline
{\em f\+\_\+g} & the glossy brdf \\
\hline
{\em w} & the current path weight \\
\hline
{\em f\+\_\+L} & the current light E\+DF sample contribution, including the M\+IS weight \\
\hline
{\em out\+\_\+w\+\_\+d} & the output diffuse weight \\
\hline
{\em out\+\_\+w\+\_\+g} & the output glossy weight \\
\hline
{\em out\+\_\+vertex\+\_\+info} & the output packed vertex info \\
\hline
\end{DoxyParams}
\mbox{[}P\+T\+Vertex\+Processor\+::compute\+\_\+nee\+\_\+weights\+\_\+body\mbox{]}

\mbox{[}P\+T\+Vertex\+Processor\+::compute\+\_\+nee\+\_\+weights\+\_\+body\mbox{]} \mbox{\Hypertarget{struct_p_t_vertex_processor_a832bbbc566d333cd7a0789690f5f7c62}\label{struct_p_t_vertex_processor_a832bbbc566d333cd7a0789690f5f7c62}} 
\index{P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}!compute\+\_\+scattering\+\_\+weights@{compute\+\_\+scattering\+\_\+weights}}
\index{compute\+\_\+scattering\+\_\+weights@{compute\+\_\+scattering\+\_\+weights}!P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}}
\subsubsection{\texorpdfstring{compute\+\_\+scattering\+\_\+weights()}{compute\_scattering\_weights()}}
{\footnotesize\ttfamily template$<$typename P\+T\+Context $>$ \\
F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE void P\+T\+Vertex\+Processor\+::compute\+\_\+scattering\+\_\+weights (\begin{DoxyParamCaption}\item[{const P\+T\+Context \&}]{context,  }\item[{const \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&}]{renderer,  }\item[{const \hyperlink{union_pixel_info}{Pixel\+Info}}]{pixel\+\_\+info,  }\item[{const uint32}]{prev\+\_\+vertex\+\_\+info,  }\item[{const uint32}]{vertex\+\_\+info,  }\item[{const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&}]{ev,  }\item[{const uint32}]{out\+\_\+comp,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{g,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{w,  }\item[{\hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f} \&}]{out\+\_\+w,  }\item[{uint32 \&}]{out\+\_\+vertex\+\_\+info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\mbox{[}\hyperlink{struct_p_t_vertex_processor_acca5b26b69481a1fada796bac4588b9b}{P\+T\+Vertex\+Processor\+::compute\+\_\+nee\+\_\+weights}\mbox{]} 

\mbox{[}\hyperlink{struct_p_t_vertex_processor_a832bbbc566d333cd7a0789690f5f7c62}{P\+T\+Vertex\+Processor\+::compute\+\_\+scattering\+\_\+weights}\mbox{]} compute scattering weights given a vertex


\begin{DoxyParams}{Parameters}
{\em context} & the current context \\
\hline
{\em renderer} & the current renderer \\
\hline
{\em pixel\+\_\+info} & packed pixel info \\
\hline
{\em vertex\+\_\+info} & packed vertex info \\
\hline
{\em ev} & the local vertex \\
\hline
{\em out\+\_\+comp} & the bsdf scattering component \\
\hline
{\em g} & the bsdf scattering weight (= f/p) \\
\hline
{\em w} & the current path weight \\
\hline
{\em out\+\_\+w} & the output path weight \\
\hline
{\em out\+\_\+vertex\+\_\+info} & the output vertex info \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{struct_p_t_vertex_processor_aa234e9a79024286bf6a7e93dc7cf3d10}\label{struct_p_t_vertex_processor_aa234e9a79024286bf6a7e93dc7cf3d10}} 
\index{P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}!preprocess\+\_\+vertex@{preprocess\+\_\+vertex}}
\index{preprocess\+\_\+vertex@{preprocess\+\_\+vertex}!P\+T\+Vertex\+Processor@{P\+T\+Vertex\+Processor}}
\subsubsection{\texorpdfstring{preprocess\+\_\+vertex()}{preprocess\_vertex()}}
{\footnotesize\ttfamily template$<$typename P\+T\+Context $>$ \\
F\+E\+R\+M\+A\+T\+\_\+\+D\+E\+V\+I\+CE uint32 P\+T\+Vertex\+Processor\+::preprocess\+\_\+vertex (\begin{DoxyParamCaption}\item[{const P\+T\+Context \&}]{context,  }\item[{const \hyperlink{struct_rendering_context_view}{Rendering\+Context\+View} \&}]{renderer,  }\item[{const \hyperlink{union_pixel_info}{Pixel\+Info}}]{pixel\+\_\+info,  }\item[{const \hyperlink{struct_eye_vertex}{Eye\+Vertex} \&}]{ev,  }\item[{const float}]{cone\+\_\+radius,  }\item[{const \hyperlink{structcugar_1_1_bbox}{cugar\+::\+Bbox3f}}]{scene\+\_\+bbox,  }\item[{const uint32}]{prev\+\_\+vertex\+\_\+info,  }\item[{const \hyperlink{structcugar_1_1_vector}{cugar\+::\+Vector3f}}]{w,  }\item[{const float}]{p\+\_\+prev }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

preprocess a vertex and return some packed vertex info


\begin{DoxyParams}{Parameters}
{\em context} & the current context \\
\hline
{\em renderer} & the current renderer \\
\hline
{\em pixel\+\_\+info} & packed pixel info \\
\hline
{\em ev} & the eye vertex \\
\hline
{\em cone\+\_\+radius} & the current cone radius \\
\hline
{\em scene\+\_\+bbox} & the scene bounding box \\
\hline
\end{DoxyParams}


The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
C\+:/p4research/research/jpantaleoni/\+Fermat-\/\+Public/src/pathtracer\+\_\+vertex\+\_\+processor.\+h\end{DoxyCompactItemize}
