<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>Fermat: Fermat</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
  m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-47310325-1', 'nvlabs.github.io');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Fermat
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Fermat </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> 
 <img src="escher_room.png" style="position:relative; bottom:-10px; border:0px;"/>
</p>
<dl class="section user"><dt></dt><dd><br />
 <a href="https://github.com/NVlabs/fermat">Fermat</a>, is a high performance research oriented physically based rendering system, trying to produce beautiful pictures following the mathematician's principle of least time. <br />
 It is a CUDA physically based research renderer designed and developed by Jacopo Pantaleoni at NVIDIA. Its purpose is mostly educational: it is primarily intended to teach how to write rendering algorithms, ranging from simple forward path tracing, to bidirectional path tracing, to Metropolis light transport with many of its variants, and do so on massively parallel hardware. <br />
 The choice of CUDA C++ has been made for various reasons: the first was to allow the highest level of expression and flexibility in terms of programmability (for example, with template based meta-programming); the second was perhaps historical: when Fermat's development was started, other ray tracing platforms like Microsoft DXR did not exist yet. The ray tracing core employed by Fermat is OptiX - though it is possible that future versions might also offer a DXR or a Vulkan backend. <br />
 Fermat is built on top of another library co-developed for this project: <a class="el" href="cugar_page.html">CUGAR</a> - CUDA Graphics AcceleratoR. This is a template library of low-level graphics tools, including algorithms for BVH, Kd-tree and octree construction, sphericals harmonics, sampling, and so on and so on. While packaged together, CUGAR can be thought of as a separate educational project by itself. More information can be found in the relevant Doxygen documentation.</dd></dl>
<h1><a class="anchor" id="FermatIntroductionSection"></a>
Introduction</h1>
<dl class="section user"><dt></dt><dd>At the highest level, Fermat is basically a collection of separate renderers. All renderers use Optix Prime as a ray tracing backend, and implement recursive ray / path tracing as an iterative process, in which rays representing new path segments are spawned in <em>wavefronts</em>. This means each renderer is pretty much written like a pipeline of interleaved <em>tracing</em> and <em>shading</em> stages communicating through global memory queues. <br />
 Currently, the list of available renderers include: <br />
<ul>
<li><a class="el" href="struct_path_tracer.html">PathTracer</a> (<em>PT</em>): a simple forward path tracer with next-event estimation</li>
<li><a class="el" href="struct_p_s_f_p_t.html">PSFPT</a>: a path space filtering path tracer, following ideas first developed by Sascha Fricke, Nikolaus Binder and Alex Keller: <a href="https://dl.acm.org/citation.cfm?id=3214806">Fast path space filtering by jittered spatial hashing</a>, Binder et al, ACM SIGGRAPH 2018 Talks.</li>
<li><a class="el" href="struct_b_p_t.html">BPT</a>: a bidirectional path tracer</li>
<li><a class="el" href="struct_m_l_t.html">MLT</a>: a path space Metropolis sampler, inspired by the original formulation from Eric Veach: <a href="https://graphics.stanford.edu/papers/metro/metro.pdf">Metropolis light transport</a>, Veach and Guibas, Proceedings of the 24th annual conference on Computer graphics and interactive techniques, 1997 - Pages 65-76</li>
<li><a class="el" href="struct_p_s_s_m_l_t.html">PSSMLT</a>: a primary sample space Metropolis sampler, inspired by the seminal paper: <a href="https://onlinelibrary.wiley.com/doi/pdf/10.1111/1467-8659.t01-1-00703">A Simple and Robust Mutation Strategy for the Metropolis Light Transport Algorithm</a>, Kelemen et al, Computer Graphics Forum, Volume21, Issue3, September 2002 - Pages 531-540</li>
<li><a class="el" href="struct_c_m_l_t.html">CMLT</a>: a Charted Metropolis light transport sampler, as described in: <a href="https://arxiv.org/abs/1612.05395">Charted Metropolis Light Transport</a>, Jacopo Pantaleoni, ACM Transactions on Graphics, Volume 36 Issue 4, July 2017.</li>
<li><a class="el" href="struct_r_p_t.html">RPT</a>: a reuse-based path tracer inspired by the paper: <a href="https://www.researchgate.net/publication/220853005_Accelerating_Path_Tracing_by_Re-Using_Paths">Accelerating path tracing by re-using path</a>, by Bekaert et al EGRW '02 Proceedings of the 13th Eurographics workshop on Rendering Pages 125-134 </li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>All renderers are implemented on top of a single virtual interface, namely the <a class="el" href="struct_renderer_interface.html">RendererInterface</a>. Among the various methods this class may implement (e.g. for self initialization, registering auxiliary frame-buffer channels, handling mouse and keyboard events, etc), it must implement a single method: <div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="struct_renderer_interface.html#aa64254dd44c94929b05092dc8d74f29d">RendererInterface::render</a>(<span class="keyword">const</span> uint32 instance, <a class="code" href="struct_rendering_context.html">RenderingContext</a>&amp; rendering_context);</div></div><!-- fragment --> which takes a frame <em>instance</em> number, useful for progressive rendering, and a reference to a <a class="el" href="struct_rendering_context.html">RenderingContext</a> object: the latter encodes all the information belonging to the current rendering context, including the scene mesh, the output frame-buffer, and so on and so on. <br />
 Finally, all unidirectional renderers are based on a common, template-based library for path tracing, described in the <a class="el" href="group___p_t_lib.html">PTLib</a> module, while all bidirectional renderers are based on a similar template-based library for bidirectional path tracing, described in the <a class="el" href="group___b_p_t_lib.html">BPTLib</a> module.</dd></dl>
<h1><a class="anchor" id="FermatCompilationSection"></a>
Compiling Fermat</h1>
<dl class="section user"><dt></dt><dd>Assuming you have Windows 10.0, Visual Studio 2015, CUDA 10.0 and OptiX 6 installed (driver version 418.81 and above), compiling Fermat should be straightforward. It will be sufficient to open the VS solution located in <em>..sln</em>, and press Build -&gt; Build Solution. Note that there are three different projects:<ul>
<li><b>fermatdll</b>: Fermat's core library</li>
<li><b>fermat</b>: the main executable, linking fermat.dll</li>
<li><b>hellopt</b>: an example plugin renderer</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="FermatDocumentationSection"></a>
Documentation</h1>
<h2><a class="anchor" id="FermatDelivingIntoThePitSection"></a>
Delving into the Pit</h2>
<dl class="section user"><dt></dt><dd>If you truly want to know more about Fermat's internals you could certainly just go and look at the code, or skim through the <a class="el" href="_modules_page.html">Module List</a>, though admittedly that's something that even the author would hardly ever do with somebody else's codebase. Hopefully, a much better alternative is to follow this link that will guide you through a step by step explanation which, at least in principle, pretends to be written in a more or less logical order: </dd></dl>
<dl class="section user"><dt></dt><dd><a class="el" href="_overture_contents_page.html">Fermat: An Overture</a>. </dd></dl>
<dl class="section user"><dt></dt><dd><ul>
<li>
1. <a class="el" href="_overture_page.html">Introduction</a> <ul>
<li>
1.1. <a class="el" href="_overture_page.html#MeshesSection">The Mesh Geometry</a> </li>
<li>
1.2. <a class="el" href="_overture_page.html#CameraSection">The Camera Model</a> </li>
<li>
1.3. <a class="el" href="_overture_page.html#BSDFSection">The BSDF Model</a> </li>
<li>
1.4. <a class="el" href="_overture_page.html#LightSection">The Light Source Model</a> </li>
</ul>
</li>
<li>
2. <a class="el" href="_r_t_context_page.html">Ray Tracing Contexts</a> </li>
<li>
3. <a class="el" href="_rendering_context_page.html">The Rendering Context</a> </li>
<li>
4. <a class="el" href="_renderer_interface_page.html">The Renderer Interface</a> </li>
<li>
5. <a class="el" href="_plugins_page.html">Plugins</a> </li>
<li>
6. <a class="el" href="_hello_renderer_page.html">Hello Renderer!</a> <ul>
<li>
6.1. <a class="el" href="_hello_renderer_page.html#HelloPTGeneratingPrimaryRaysSection">Generating Primary Rays</a> </li>
<li>
6.2. <a class="el" href="_hello_renderer_page.html#HelloPTShadingVerticesSection">Shading Vertices</a> </li>
<li>
6.3. <a class="el" href="_hello_renderer_page.html#HelloPTSolvingOcclusionSection">Resolving Occlusion</a> </li>
<li>
6.4. <a class="el" href="_hello_renderer_page.html#HelloPTPluginSection">The Plugin</a> </li>
<li>
6.5. <a class="el" href="_hello_renderer_page.html#HelloPTDoneSection">We're Done!</a> </li>
</ul>
</li>
<li>
7. <a class="el" href="_p_t_lib_page.html">PTLib</a> <ul>
<li>
7.1. <a class="el" href="_p_t_lib_page.html#PTWavefrontSchedulingSection">Wavefront Scheduling</a> </li>
</ul>
</li>
<li>
8. <a class="el" href="_p_t_page.html">The Path Tracer (Revisited)</a> </li>
<li>
9. <a class="el" href="_p_s_f_p_t_page.html">The Path-Space Filtering Path Tracer</a> </li>
<li>
10. <a class="el" href="_b_p_t_lib_page.html">BPTLib</a> <ul>
<li>
10.1. <a class="el" href="_b_p_t_lib_page.html#BPTLibCoreSection">BPTLibCore Description</a> </li>
<li>
10.2. <a class="el" href="_b_p_t_lib_page.html#BPTLibSection">BPTLib Description</a> </li>
<li>
10.3. <a class="el" href="_b_p_t_lib_page.html#BPTExampleSection">An Example</a> </li>
</ul>
</li>
<li>
11. <a class="el" href="_modules_page.html">Module List</a> </li>
</ul>
</dd></dl>
<h1><a class="anchor" id="FermatDependenciesSection"></a>
Dependencies</h1>
<dl class="section user"><dt></dt><dd>Fermat depends on the following external libraries: <br />
<ul>
<li><a href="http://nvlabs.github.io/cub/">CUB</a> : contained in the package</li>
<li>a modification of Nathaniel McClatchey's <a href="https://github.com/nmcclatchey/Priority-Deque/">priority_deque</a> : contained in the package</li>
<li><a href="http://freeglut.sourceforge.net/">FreeGLUT</a> : contained in the package</li>
<li><a href="http://assimp.org/">Assimp</a> : contained in the package</li>
<li><a href="https://developer.nvidia.com/cuda-80-ga2-download-archive">CUDA 10.0</a> : <b>not contained</b> - it should be separately downloaded and installed on the system</li>
<li><a href="https://developer.nvidia.com/optix">NVIDIA OptiX 6.0</a> : <b>not contained</b> - it should be separately downloaded and copied in the folder <em>contrib/OptiX</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>It also needs an NVIDIA Driver 418.81 or newer.</dd></dl>
<h1><a class="anchor" id="Licensing"></a>
Licensing</h1>
<dl class="section user"><dt></dt><dd>Fermat has been developed by <a href="www.nvidia.com">NVIDIA Corporation</a> and is licensed under BSD.</dd></dl>
<h1><a class="anchor" id="Contributors"></a>
Contributors</h1>
<dl class="section user"><dt></dt><dd><a href="https://github.com/NVlabs/fermat">Fermat</a> is made and mantained by <a href="jpantaleoni@nvidia.com">Jacopo Pantaleoni</a>.</dd></dl>
<h1><a class="anchor" id="NewsSection"></a>
Versions and News</h1>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td style="white-space: nowrap; vertical-align:text-top;">4/2/2019 <br />
 Fermat 2.0 </td><td style="vertical-align:text-top;" width="90%"><ul>
<li><b>New Features:</b> <br />
<ul>
<li>Added an OptiX 6.0 backend with full RTX support.</li>
<li>Added a new plugin renderer interface.</li>
<li>Added a path-space <a class="el" href="struct_m_l_t.html">MLT</a> renderer.</li>
<li>Added a novel <a class="el" href="struct_direct_lighting_r_l.html">reinforcement-learning based direct lighting sampler</a>.</li>
<li>Added an example plugin renderer.</li>
<li>Added a new scene description format and support for more formats with <a href="http://assimp.org/">Assimp</a>.</li>
<li>Added a <a href="https://www.pbrt.org/fileformat-v3.html">pbrt</a> scene importer.</li>
<li>Added comprehensive documentation.  </li>
</ul>
</li>
</ul>
</td></tr>
</table>
</dd></dl>
<dl class="section user"><dt></dt><dd><table class="doxtable">
<tr>
<td style="white-space: nowrap; vertical-align:text-top;">20/4/2018 <br />
 Fermat 1.0 </td><td style="vertical-align:text-top;" width="90%"><ul>
<li><b>First Release</b>  </li>
</ul>
</td></tr>
</table>
</dd></dl>
<h1><a class="anchor" id="DownloadSection"></a>
Download</h1>
<dl class="section user"><dt></dt><dd>You can download Fermat from GitHub at: <br />
 <a href="https://github.com/NVlabs/fermat">https://github.com/NVlabs/fermat</a> <br />
 or directly clone the repository with the command: <br />
 git clone <a href="https://github.com/NVlabs/fermat.io">https://github.com/NVlabs/fermat.io</a></dd></dl>
<p> 
 <a href="http://nvidia.com"><img src="nvidia.png" style="position:relative; bottom:-10px; border:0px;"/></a>
 &nbsp;&nbsp;
 </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
